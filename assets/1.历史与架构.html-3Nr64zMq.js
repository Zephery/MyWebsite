import{_ as t,c as r,d as a,o as i}from"./app-DtAVAFTf.js";const n={};function l(o,e){return i(),r("div",null,e[0]||(e[0]=[a('<h1 id="_1-历史与架构" tabindex="-1"><a class="header-anchor" href="#_1-历史与架构"><span>1.历史与架构</span></a></h1><p>各位大佬瞄一眼<a href="http://www.wenzhihuai.com/" target="_blank" rel="noopener noreferrer">我的个人网站</a>呗 。如果觉得不错，希望能在GitHub上麻烦给个star，GitHub地址<a href="https://github.com/Zephery/newblog" target="_blank" rel="noopener noreferrer">https://github.com/Zephery/newblog</a> 。<br> 大学的时候萌生的一个想法，就是建立一个个人网站，前前后后全部推翻重构了4、5遍，现在终于能看了，下面是目前的首页。</p><figure><img src="https://github-images.wenzhihuai.com/images/600-20240126113210252.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>由原本的ssh变成ssm，再变成ssm+shiro+lucene，到现在的前后台分离。前台使用ssm+lucene，后台使用spring boot+shiro。其中，使用pagehelper作为分页，lucene用来搜索和自动补全，使用百度统计的API做了个日志系统，统计pv和uv什么的，同时，还有使用了JMX来观察JVM的使用和cpu的使用率，机器学习方面，使用了adaboost和朴素贝叶斯对微博进行分类，有兴趣的可以点点<a href="http://www.wenzhihuai.com/weibonlp.html" target="_blank" rel="noopener noreferrer">有点意思</a>这个页面。<br> 本文从下面这几个方面来讲讲网站的建立：<br></p><ol><li><a href="https://github.com/Zephery/newblog/blob/master/doc/1.%E5%8E%86%E5%8F%B2%E4%B8%8E%E6%9E%B6%E6%9E%84.md" target="_blank" rel="noopener noreferrer">建站故事与网站架构</a><br></li><li><a href="https://github.com/Zephery/newblog/blob/master/doc/2.Lucene%E7%9A%84%E4%BD%BF%E7%94%A8.md" target="_blank" rel="noopener noreferrer">lucene搜索的使用</a><br></li><li><a href="https://github.com/Zephery/newblog/blob/master/doc/3.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.md" target="_blank" rel="noopener noreferrer">使用quartz来定时备份数据库</a><br></li><li><a href="https://github.com/Zephery/baidutongji/blob/master/README.md" target="_blank" rel="noopener noreferrer">使用百度统计api做日志系统</a><br></li><li><a href="https://github.com/Zephery/newblog/blob/master/doc/6.%E5%B0%8F%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2.md" target="_blank" rel="noopener noreferrer">Nginx小集群的搭建</a><br></li><li>[数据库]<br></li><li>使用机器学习对微博进行分析<br></li><li>网站性能优化<br></li><li>SEO优化<br></li></ol><h2 id="_1-建站故事与网站架构" tabindex="-1"><a class="header-anchor" href="#_1-建站故事与网站架构"><span>1.建站故事与网站架构</span></a></h2><h3 id="_1-1建站过程" tabindex="-1"><a class="header-anchor" href="#_1-1建站过程"><span>1.1建站过程</span></a></h3><p>起初，是因为学习的时候老是找不到什么好玩而又有挑战性的项目，看着struts、spring、hibernate的书，全都是一些小项目，做了感觉也没啥意义，有时候在博客园看到别人还有自己的网站，特羡慕，最终就选择了自己做一个个人网站。期初刚学的ssh，于是开始了自己的ssh搭建个人网站的行程，但是对于一个后端的人来说，前端是个大问题啊。。。。所以初版的时候差不多全是纯生的html、css、js，至少发博客这个功能实现了，但是确实没法看。前前后后折腾了一个多月，决定推翻重做，到百度看看别人怎么做的。首先看到的是<a href="http://www.yangqq.com/" target="_blank" rel="noopener noreferrer">杨青</a>的网站，已经好几年没更新了，前端的代码看起来比较简单，也是自己能够掌握的，但是不够美观，继续找，在模板之家发现了一个高大上的模板。</p><figure><img src="https://github-images.wenzhihuai.com/images/500.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>第二版的界面确实是这样的，只是把图片的切换变成了wowslider，也是简单的用bootstrap和pagehelper做了下分页，现在的最终版保留了它的header，然后评论框使用了多说（超级怀念多说）。后端也由原来的ssh变成了ssm，之后加上了lucene来对文章进行索引。之后，随着多说要关闭了，突然之间有很多div都不适应了（我写死了的。。。），再一次，没法看，不想看，一怒之下再次推翻重做，变成了现在这个版本。</p><p>最终版本在考虑时，也找了很多模板，影响深刻的是<a href="https://tale.biezhi.me" target="_blank" rel="noopener noreferrer">tale</a>和<a href="https://yusi123.com" target="_blank" rel="noopener noreferrer">欲思</a>这两个主题，期中，tale使用的是java语言写的，刚知道的那一刻我就没好感了，java后端我是要自己全部写的，tale这个页面简洁但是不够炫，而且内容量太低，可能就只是个纯博客，之后发现了欲思，拓展性强，只可惜没有静态的版本，后台是纯生的PHP（嗯，PHP是世界上最好的语言），看了看，没事，保存网页，前端自己改，后端自己全部重写，最终变成了现在这个版本，虽然拼接的时候各种css、js混入。。。。还好在做网站性能优化的时候差不多全部去掉了。最终版加入redis、quartz、shiro等，还有python机器学习、flask的restful api，可谓是大杂烩了。<br> 页面看着还算凑合，至少不是那种看都看不过去的那种了，但是仔细看看，还是有不少问题的，比如瀑布流，还有排版什么的。只能等自己什么时候想认真学学前端的东西了。<br> 已经部署在腾讯云服务器上，存储使用了七牛云的cdn。</p><h3 id="_1-2-网站整体技术架构" tabindex="-1"><a class="header-anchor" href="#_1-2-网站整体技术架构"><span>1.2 网站整体技术架构</span></a></h3><p>最终版的技术架构图如下：</p><figure><img src="https://github-images.wenzhihuai.com/images/awfawefwefwef.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>网站核心主要采用Spring SpringMVC和Mybatis，下图是当访问一篇博客的时候的运行流程，参考了<a href="http://jinnianshilongnian.iteye.com/blog/1594806" target="_blank" rel="noopener noreferrer">张开涛</a>的博客。</p><figure><img src="https://github-images.wenzhihuai.com/images/awefaweagregrgbwerbwer.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>运行流程分析</strong><br></p><ol><li>浏览器发送http请求。/blogdetail.html?blogid=1。<br></li><li>tomcat容器初始化，顺序为context-param&gt;listener&gt;filter&gt;servlet，此时，spring中的bean还没有被注入的，不建议在此处加载bean，网站声明了两个类（IPFilter和CacheControlFilter），IPFilter用来拦截IP，CacheControlFilter用来缓存。<br></li><li>初始化Spring。<br></li><li>DispatcherServlet——&gt;HandlerMapping进行请求到处理的映射，HandlerMapping将“/blogdetail”路径直接映射到名字为“/blogdetail”的Bean进行处理，即BlogController。<br></li><li>自定义拦截器，其中BaseIntercepter实现了HandleInterceptor的接口，用来记录每次访问的链接以及后台响应的时间。<br></li><li>DispatcherServlet——&gt; SimpleControllerHandlerAdapter，SimpleControllerHandlerAdapter将HandlerExecutionChain中的处理器适配为BlogController。<br></li><li>BlogController执行查询，取得结果集返回数据。<br></li><li>blogdetail（ModelAndView的逻辑视图名）——&gt;InternalResourceViewResolver， InternalResourceViewResolver使用JstlView，具体视图页面在/blogdetail.jsp。<br></li><li>JstlView（/blogdetail.jsp）——&gt;渲染，将在处理器传入的模型数据(blog=Blog！)在视图中展示出来。<br></li><li>返回响应。<br></li></ol><h3 id="_1-3-日志系统" tabindex="-1"><a class="header-anchor" href="#_1-3-日志系统"><span>1.3 日志系统</span></a></h3><p>日志系统架构如下：</p><figure><img src="https://github-images.wenzhihuai.com/images/awfawefwefawefwef.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><a href="http://www.wenzhihuai.com/log.html" target="_blank" rel="noopener noreferrer">日志系统</a>曾经尝试采用过ELK，实时监控实在是让人不能不称赞，本地也跑起来了，但是一到服务器，卡卡卡，毕竟（1Ghz CPU、1G内存），只能放弃ELK，采用百度统计。百度统计提供了Tongji API供开发者使用，只是有次数限制，2000/日，实时的话实在有点低，只能统计前几天的PV、UV等开放出来。其实这个存放在mysql也行，不过这些零碎的数据还是放在redis中，方便管理。<br> 出了日志系统，自己对服务器的一些使用率也是挺关心的，毕竟服务器配置太低，于是利用了使用了tomcat的JMX来对CPU和jvm使用情况进行监控，这两个都是实时的。出了这两个，对内存的分配做了监控，Eden、Survivor、Tenured的使用情况。<br></p><h3 id="_1-4-【有点意思】自然语言处理" tabindex="-1"><a class="header-anchor" href="#_1-4-【有点意思】自然语言处理"><span>1.4 【有点意思】自然语言处理</span></a></h3><p>本人大学里的毕业设计就是基于AdaBoost算法的情感分类，学到的东西还是要经常拿出来看看，要不然真的浪费了我这么久努力做的毕业设计啊。构建了一个基本的情感分类小系统，每天抓取微博进行分类存储在MySql上，并使用flask提供Restful API给java调用，可以点击<a href="http://www.wenzhihuai.com/weibonlp.html" target="_blank" rel="noopener noreferrer">这里</a>尝试（请忽略Google的图片）。目前分类效果不是很明显，准确率大概只有百分之70%，因为训练样本只有500条（找不到训练样本），机器学习真的太依赖样本的标注。这个，只能请教各位路人大神指导指导了。</p><figure><img src="https://github-images.wenzhihuai.com/images/QQ截图20170825141127.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结<br></span></a></h2><p>断断续续，也总算做了一个能拿得出手仍要遮遮掩掩才能给别人看的网站，哈哈哈哈哈，也劳烦各位帮忙找找bug。前前后后从初学Java EE就一直设想的事也还算有了个了结，以后要多多看书，写点精品文章。PS：<a href="https://github.com/Zephery/newblog" target="_blank" rel="noopener noreferrer">GitHub上求给个Star</a>，以后面试能讲讲这个网站。</p>',27)]))}const s=t(n,[["render",l],["__file","1.历史与架构.html.vue"]]),p=JSON.parse('{"path":"/interesting/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/1.%E5%8E%86%E5%8F%B2%E4%B8%8E%E6%9E%B6%E6%9E%84.html","title":"1.历史与架构","lang":"zh-CN","frontmatter":{"description":"1.历史与架构 各位大佬瞄一眼我的个人网站呗 。如果觉得不错，希望能在GitHub上麻烦给个star，GitHub地址https://github.com/Zephery/newblog 。 大学的时候萌生的一个想法，就是建立一个个人网站，前前后后全部推翻重构了4、5遍，现在终于能看了，下面是目前的首页。 由原本的ssh变成ssm，再变成ssm+shi...","head":[["meta",{"property":"og:url","content":"http://www.wenzhihuai.com/interesting/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/1.%E5%8E%86%E5%8F%B2%E4%B8%8E%E6%9E%B6%E6%9E%84.html"}],["meta",{"property":"og:site_name","content":"个人博客"}],["meta",{"property":"og:title","content":"1.历史与架构"}],["meta",{"property":"og:description","content":"1.历史与架构 各位大佬瞄一眼我的个人网站呗 。如果觉得不错，希望能在GitHub上麻烦给个star，GitHub地址https://github.com/Zephery/newblog 。 大学的时候萌生的一个想法，就是建立一个个人网站，前前后后全部推翻重构了4、5遍，现在终于能看了，下面是目前的首页。 由原本的ssh变成ssm，再变成ssm+shi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github-images.wenzhihuai.com/images/600-20240126113210252.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T18:24:35.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-11T18:24:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"1.历史与架构\\",\\"image\\":[\\"https://github-images.wenzhihuai.com/images/600-20240126113210252.png\\",\\"https://github-images.wenzhihuai.com/images/500.png\\",\\"https://github-images.wenzhihuai.com/images/awfawefwefwef.png\\",\\"https://github-images.wenzhihuai.com/images/awefaweagregrgbwerbwer.png\\",\\"https://github-images.wenzhihuai.com/images/awfawefwefawefwef.png\\",\\"https://github-images.wenzhihuai.com/images/QQ%E6%88%AA%E5%9B%BE20170825141127.png\\"],\\"dateModified\\":\\"2024-05-11T18:24:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zephery\\",\\"url\\":\\"https://wenzhihuai.com/article/\\"}]}"]]},"headers":[{"level":2,"title":"1.建站故事与网站架构","slug":"_1-建站故事与网站架构","link":"#_1-建站故事与网站架构","children":[{"level":3,"title":"1.1建站过程","slug":"_1-1建站过程","link":"#_1-1建站过程","children":[]},{"level":3,"title":"1.2 网站整体技术架构","slug":"_1-2-网站整体技术架构","link":"#_1-2-网站整体技术架构","children":[]},{"level":3,"title":"1.3 日志系统","slug":"_1-3-日志系统","link":"#_1-3-日志系统","children":[]},{"level":3,"title":"1.4 【有点意思】自然语言处理","slug":"_1-4-【有点意思】自然语言处理","link":"#_1-4-【有点意思】自然语言处理","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"createdTime":1579574285000,"updatedTime":1715451875000,"contributors":[{"name":"zhihuaiwen","email":"zhihuaiwen@tencent.com","commits":1}]},"readingTime":{"minutes":6.79,"words":2038},"filePathRelative":"interesting/个人网站/1.历史与架构.md","localizedDate":"2020年1月21日","excerpt":"\\n<p>各位大佬瞄一眼<a href=\\"http://www.wenzhihuai.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">我的个人网站</a>呗 。如果觉得不错，希望能在GitHub上麻烦给个star，GitHub地址<a href=\\"https://github.com/Zephery/newblog\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/Zephery/newblog</a> 。<br>\\n大学的时候萌生的一个想法，就是建立一个个人网站，前前后后全部推翻重构了4、5遍，现在终于能看了，下面是目前的首页。</p>","autoDesc":true}');export{s as comp,p as data};
